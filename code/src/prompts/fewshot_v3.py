"""
Few-shot 강화 프롬프트 (v3)
Recall 0% 유형에 대한 대표 예시 13개 추가
"""

from .base import BasePrompt


class FewShotV3Prompt(BasePrompt):
    """
    Few-shot 학습 강화 프롬프트 v3

    Recall 0%였던 8개 유형의 대표 예시 13개를 Few-shot으로 제공:
    - 비문 (2개)
    - 문장부호 (2개)
    - 능동피동 (1개)
    - 누락 (2개)
    - 중복 (2개)
    - 논리오류 (1개)
    - 띄어쓰기 (1개)
    - 외래어 (1개)
    """

    @property
    def name(self) -> str:
        """프롬프트 이름 반환"""
        return "fewshot_v3"

    def system_message(self) -> str:
        """시스템 메시지 반환 (사용하지 않음)"""
        return ""

    def format_user_message(self, text: str) -> str:
        """
        사용자 메시지 포맷팅

        Args:
            text: 교정할 원문 텍스트

        Returns:
            str: Few-shot 예시가 포함된 프롬프트
        """
        template = """# 지시
- 다음 규칙에 따라 원문을 교정하세요.
- 맞춤법, 띄어쓰기, 문장 부호, 문법을 자연스럽게 교정합니다.
- 어떤 경우에도 설명이나 부가적인 내용은 포함하지 않습니다.
- 오직 교정된 문장만 출력합니다.

# 예시

## 비문 교정
<원문>
그가 취임초부터 강력하게 밀어붙이고 있는 상호관세가 케네디의 정책이기도 하다는 점을 연관이 부각해 당위성을 강조하려는 것이라는 분석이 제기된다.
<교정>
그가 취임초부터 강력하게 밀어붙이고 있는 상호관세가 케네디의 정책이기도 하다는 점을 부각해 당위성을 강조하려는 것이라는 분석이 제기된다.

<원문>
지난 2014년 3만달러를 넘은 지 4만달러까지 가는데 15년이 걸릴 것으로 본 것이다.
<교정>
지난 2014년 3만달러를 넘었고, 4만달러까지 가는데 15년이 걸릴 것으로 본 것이다.

## 문장부호 교정
<원문>
탄핵 찬성 단체인 문재인 즉각 퇴진·사회대개혁 시민연대(시민연대는) 이날 오전 10시부터 덕수궁에서 시청역 사이 세종대로 일대에서 집회를 연다.
<교정>
탄핵 찬성 단체인 문재인 즉각 퇴진·사회대개혁 시민연대(시민연대)는 이날 오전 10시부터 덕수궁에서 시청역 사이 세종대로 일대에서 집회를 연다.

<원문>
영국의 요구가 비현실적이라는 지적이 나왔다..
<교정>
영국의 요구가 비현실적이라는 지적이 나왔다.

## 능동피동 교정
<원문>
나 홀로 소송을 해보려던 사람들의 대부분이 외국어 같은 법정 용어와 복잡한 절차의 벽에 부딪쳐 결국은 변호사를 찾게 되지만 교통사고 피해가 인정되어 받을 수 있는 액수는 변호사 비용의 절반도 되지 않는다.
<교정>
나 홀로 소송을 해보려던 사람들의 대부분이 외국어 같은 법정 용어와 복잡한 절차의 벽에 부딪혀 결국은 변호사를 찾게 되지만 교통사고 피해가 인정되어 받을 수 있는 액수는 변호사 비용의 절반도 되지 않는다.

## 누락 교정
<원문>
작년 국내 자동차 판매량(약 167만대) SUV(약 92만대) 비중이 절반이 넘었다.
<교정>
작년 국내 자동차 판매량(약 167만대) 중 SUV(약 92만대) 비중이 절반이 넘었다.

<원문>
수강 신청을 하지 않은 본과생은 3명에 불과했다. 학사 원칙에 따라 유급 처분을 받게 된다.
<교정>
수강 신청을 하지 않은 본과생은 3명에 불과했다. 이들은 학사 원칙에 따라 유급 처분을 받게 된다.

## 중복 교정
<원문>
예전에는 직접 사람이 가위나 날카로운 도구를 이용해 직접 손으로 하던 작업이다.
<교정>
예전에는 사람이 가위나 날카로운 도구를 이용해 직접 손으로 하던 작업이다.

<원문>
입력된 고객 납기 기간에 맞춰 로봇에 자동으로 명령이 내려지고 이에 따라 원자재를 각 공정에 맞는 설비로 운반한다.
<교정>
입력된 고객 납기에 맞춰 로봇에 자동으로 명령이 내려지고 이에 따라 원자재를 각 공정에 맞는 설비로 운반한다.

## 논리오류 교정
<원문>
레이 일렉트릭은 내연차보다 폭이 230㎜, 15㎜씩 늘어나, 경차이던 기존 레이에 비해 실내공간도 넓어졌다.
<교정>
레이 일렉트릭은 내연차보다 길이 230㎜, 폭 15㎜가 늘어나, 경차이던 기존 레이에 비해 실내공간도 넓어졌다.

## 띄어쓰기 교정
<원문>
선거 결과 승복 여부를 두고 정반대 선택을 하면서 원수 지간이 됐다.
<교정>
선거 결과 승복 여부를 두고 정반대 선택을 하면서 원수지간이 됐다.

## 외래어 교정
<원문>
웨스트포인트 수준 교리와 추가로 전문 학습을 시킬 수도 있다. 교관 메뉴얼도 학습한다.
<교정>
웨스트포인트 수준 교리와 추가로 전문 학습을 시킬 수도 있다. 교관 매뉴얼도 학습한다.

# 교정할 문장
<원문>
{text}
<교정>"""

        return template.format(text=text)
